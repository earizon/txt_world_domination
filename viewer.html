<!DOCTYPE html>
<html>
   <meta charset="UTF-8">
   <meta name="viewport"
     content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
   <title>TXT World Domination</title>
   <head>

<style>
@font-face {
  font-family: 'font0'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font0/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font1'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font1/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font2'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font2/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font3'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font3/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font4'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font4/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font5'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font5/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font6'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font6/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font7'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font7/font.woff2) format('woff2');
}

pre { 
    'font0',monospace, console; 
}

#dbEngineOutput[font=font0]{ font-family:'font0', monospace, console; }
#dbEngineOutput[font=font1]{ font-family:'font1', monospace, console; }
#dbEngineOutput[font=font2]{ font-family:'font2', monospace, console; }
#dbEngineOutput[font=font3]{ font-family:'font3', monospace, console; }
#dbEngineOutput[font=font4]{ font-family:'font4', monospace, console; }
#dbEngineOutput[font=font5]{ font-family:'font5', monospace, console; }
#dbEngineOutput[font=font6]{ font-family:'font6', monospace, console; }
#dbEngineOutput[font=font7]{ font-family:'font7', monospace, console; }
#dbEngineOutput[showbaseline=true]{  text-decoration: underline; text-underline-position: under; }
#dbEngineOutput[linebreak=true]   {  white-space: pre-wrap; }
#dbEngineOutput[lineheight=height1]{ line-height: 1.2em }
#dbEngineOutput[lineheight=height2]{ line-height: 1.5em }
#dbEngineOutput[lineheight=height3]{ line-height: 2.0em }
#dbEngineOutput[lineheight=height4]{ line-height: 2.5em }

pre[fontSize=s1]{ font-size: 1.0em }
pre[fontSize=s2]{ font-size: 1.5em }
pre[fontSize=s3]{ font-size: 2.0em }
pre[fontSize=s4]{ font-size: 2.5em }

#idControlPanel {
    margin: 0; padding 0.1em;
    border-bottom: 1px solid black; 
    position: sticky;
    top: 0;
    background-color: white;
    box-shadow: 0 0 3px 3px grey;
    max-height: 25em;
    overflow: auto;
    /* Hide scrollbar for IE, Edge and Firefox, but keep overflow: auto to enable scrolling */
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;     /* Firefox */
    background-color: #DDD;
}
#idControlPanel::-webkit-scrollbar {
   /* Hide scrollbar for Chrome, Safari and Opera, but keep overflow: auto to enable scrolling */
  display: none;
}

*[zoom="z1.5"] { font-size: 1.5em; }

#idTableTopics,#idTableIndex {
    overflow: auto;
    border: 1px solid black;
    max-height: 20em;
    margin: 0;
}
#idTableTopics[size=s1], #idTableIndex[size=s1] {
    max-height: 70%;
}

#idControlPanel[size=s2] { }
#idControlPanel[size=s3] { max-height: 2.0em; height: 2em; }
#idControlPanel[size=s1] { max-height: 95%  ; height: 95%; }

/* REF: https://projects.verou.me/css3patterns/ */
#dbEngineOutput[background=b1] { 
  background-color: #eee;
  background-image: linear-gradient(15deg, #DDD 0%, #FFF 25%, #FFF 75%, #DDD 100%),
                    linear-gradient(15deg, #DDD 0%, #FFF 25%, #FFF 75%, #DDD 100%);

  background-size : 60px 60px;
  background-position: 0 0, 30px 30px;
}

#dbEngineOutput[background=b2] { 
  background-color: #eee;
  background-image: linear-gradient(45deg, #DDD 0%, #FFF 25%, #FFF 75%, #DDD 100%),
                    linear-gradient(45deg, #DDD 0%, #FFF 25%, #FFF 75%, #DDD 100%);
  background-size : 30px 30px;
  background-position: 0 0, 15px 15px;
}

.topicClass {
  margin: 0px;
  padding: 0px;
  padding-left: 10em;
  text-indent :-10em; /* un-indent 1st line */
  white-space:pre-line;
  border-bottom: 1px solid grey;
}
.topicClass > .topic {
  float:left;
  min-width: 10em;
}

.selected { background-color:black; color: white ; }

.grepMatch { background-color:#DDD; }

input:not(:placeholder-shown) { color: white; background-color: black; }

#idSwitchMenuIcon {
  position: absolute; top:-0.2em; right: 0.2em;
  font-size: 2.0em;
  font-weight: bold;
}

.textSelectOff {
  user-select        : none; /* supported by Chrome and Opera */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select : none; /* Konqueror HTML */
  -moz-user-select   : none; /* Firefox */
  -ms-user-select    : none; /* Internet Explorer/Edge */
}
</style>
<script type="module">
import { html, render } from './preact.standalone.module.js';
import { ControlPanel } from './control_panel.js';

const getParameterByName = function(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

const bootstrap = async function () {
  const URLtxtDDBB = getParameterByName('payload')
  render( html` <${ControlPanel} url_txt_source=${URLtxtDDBB} />`, document.getElementById("idControlPanel"))
}


window.addEventListener('load', bootstrap )
</script>
</head>
<body>
<pre id="idControlPanel" class="textSelectOff" fontSize="s3" size=s2 >
</pre>
<pre id="dbEngineOutput" lineheight="height1" fontSize="s2" background="b1" >
</pre>

</body>
</html>
