<!DOCTYPE html>
<html>
   <meta charset="UTF-8">
   <meta name="viewport"
     content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
   <title>TXT World Domination</title>
   <head>

<style>

h1 {
  font-weight: bold;
  display: block;
}
h1,h2,h3,h4,h5,h6 { font-weight: bold; width: 95%; border-bottom: 1px solid black; }
  

h1, h3, h5 { text-align: left; }
h2, h4, h6 { text-align: right; }

#idTableIndex > h2 {
  display: inline;
  width: auto;
}

#dbEngineOutput > h2 {
  border-bottom: 1px solid gray;
}
ul,ol {
  padding-top: 0;
  margin: 0;
  border-left: 2px dashed #AAA;
  padding: 0 0 0 2ch;
}
ul > ul, ol > ol, ul > ol, ol > ul {
  margin: 1.0ch;
}
li {
  white-space: normal;
  padding: 0;
  margin-left: 0.5em;
}

p {
  text-indent: 0.8ch; /* indent first line */
  padding: 0;
  margin: 1ch 0 0 0;
}

.button, .button2 {
  display: inline-block;
  min-width: 1em;
  text-align: center;

  padding: 0.2em 0.3em 0.2em 0.3em;
  line-height: 1.0em;
}
.button2 {
  border: 1px solid black;
  margin-right: 2ch;
}
.buttonCompact {
  display: inline-block;
  border: 1px solid gray;
  text-align: center;
  box-shadow: 5px 5px 10px black;
  margin: 0 0.4em 0 0.4em;
  line-height: 1.0em;
  min-width: 1em;
  vertical-align: baseline;
  padding-bottom: 0.1em;
}

#fixedMenu {
  position: fixed;
  bottom: 0;
  right: 0.5em;
  width: 95%;
  overflow: auto;
  opacity: 0.9;
  -ms-overflow-style: none;
  scrollbar-width: none;
  font-size: 1.0em;
  white-space: break-spaces;
  text-align: center;
  border: 0;
}
#fixesMenu01 {
  border: 1px solid black;
  background-color: #CFC;
  display: block;
  padding:0.2em;
  margin-bottom:0.3em;
  text-align:right;
}

#nonFixedMenu {
  overflow: auto;
  scrollbar-width: none;
  position: fixed;
  right: 0.1ch;
  width: auto;
  top: 1em;
  bottom: 3.7em;
  box-shadow: 0 0 10px black;
  background-color: #DDD;
  border: 5px solid black;
  padding: 0.2em;
  max-width: 94%;
  max-height: 80%;
  opacity: 0.9;
  z-index: 1;
}


#idSettingsMenu {
  font-family: 'font1', monospace, console;
  line-height: 2.5em;
}

#idGrepInput {
  line-height: 1.7em;
  margin: 0.2em 0 0 0;
  vertical-align: top;
  padding: 0 0.2em 0 0.2em;
  border: 0px;
  font-size: 0.7em;
  outline: 1px solid gray;
  width: 30ch;
  max-width:40%;
}

p > .ln {
  position: absolute;
  float: left;
  color: red;
}
code > .ln, ol >.ln, ul > .ln, li >.ln {
  display: none;
}
@font-face {
  font-family: 'font0'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font0/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font1'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font1/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font2'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font2/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font3'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font3/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font4'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font4/font.woff2) format('woff2');
}

pre {
  font-family: 'font1', monospace, console;
  text-indent: 0;
  line-height: 1.2em;
  outline: 1px solid grey;
  background: #EFE;
  width: fit-content;
  min-width: 80%;
  overflow: scroll;
  max-width: 99%;
  padding: 0;
}

#dbEngineOutput{
  font-family: sans-serif;
  padding-top: 1.5em;
  overflow: auto;
  background-attachment: fixed;
  color: green;
  padding: 0.1em;
}
#dbEngineOutput[font=font0]{ font-family:      serif; }
#dbEngineOutput[font=font1]{ font-family: sans-serif; }
#dbEngineOutput[font=font2]{ font-family:'font2', monospace, console; }
#dbEngineOutput[font=font3]{ font-family:'font3', monospace, console; }
#dbEngineOutput[font=font4]{ font-family:'font4', monospace, console; }
#dbEngineOutput[font=font5]{ font-family:'font5', monospace, console; }
#dbEngineOutput[font=font6]{ font-family:'font6', monospace, console; }
#dbEngineOutput[font=font7]{ font-family:'font7', monospace, console; }

#dbEngineOutput[lineheight=height1]{ line-height: 1.5em }
#dbEngineOutput[lineheight=height2]{ line-height: 1.2em }
#dbEngineOutput[lineheight=height3]{ line-height: 2.0em }
#dbEngineOutput[lineheight=height4]{ line-height: 2.5em }

#dbEngineOutput[colorstyle=s1]{  }
#dbEngineOutput[colorstyle=s2]   { background-color: #022; color: #FFF;}
#dbEngineOutput[colorstyle=s2] a {                         color: #FFF;}
#dbEngineOutput[colorstyle=s3]   { background-color: #022; color: #0F0;}
#dbEngineOutput[colorstyle=s3] a {                         color: #0F0;}
#dbEngineOutput[colorstyle=s4]   { background-color: #022; color: #F00;}
#dbEngineOutput[colorstyle=s4] a {                         color: #F00;}
#dbEngineOutput[colorstyle=s5]   { background-color: #022; color: #0FF;}
#dbEngineOutput[colorstyle=s5] a {                         color: #0FF;}
#dbEngineOutput[colorstyle=s6]{ background-color: #AAA   ; color: #033;}
#dbEngineOutput[colorstyle=s6] a {                         color: #033;}

#dbEngineOutput[background=b1] { }
#dbEngineOutput[background=b2] {
  background-image: linear-gradient( 0deg, #AAA 0.5px, transparent 1px),
                    linear-gradient(90deg, #AAA 0.5px, transparent 1px);
  background-size: 4.0em 4.0em;
}

#dbEngineOutput[background=b3] {
  background-image: linear-gradient( 0deg, #AAA 0.5px, transparent 1px);
  background-size: 2.2em 2.2em;
}

#dbEngineOutput[background=b4] {
  background-image: linear-gradient(90deg, #AAA 0.5px, transparent 1px);
  background-size: 2.2em 2.2em;
}

#dbEngineOutput[fontSize=s0]{ font-size: 0.7em }
#dbEngineOutput[fontSize=s1]{ font-size: 1.0em }
#dbEngineOutput[fontSize=s2]{ font-size: 1.5em }
#dbEngineOutput[fontSize=s3]{ font-size: 2.0em }
#dbEngineOutput[fontSize=s4]{ font-size: 2.5em }
@media only screen and (pointer  : coarse) {
  #dbEngineOutput[fontSize=s0]{ font-size: 0.7em }
  #dbEngineOutput[fontSize=s1]{ font-size: 0.9em }
  #dbEngineOutput[fontSize=s2]{ font-size: 1.1em }
  #dbEngineOutput[fontSize=s3]{ font-size: 1.3em }
  #dbEngineOutput[fontSize=s4]{ font-size: 1.5em }
}

body[margin=margin0]{ margin-left: 1%; width: 98% }
body[margin=margin1]{ margin-left: 5%; width: 90% }
body[margin=margin2]{ margin-left:10%; width: 80% }
body[margin=margin3]{ margin-left:15%; width: 70% }
body[margin=margin4]{ margin-left:20%; width: 60% }

span[id] { font-weight: bold; }

body {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  font-family: sans-serif;
}

#idControlPanel {
}
@media only screen and (pointer  : coarse) {
 #idControlPanel {
    left: 30%;
    font-size: 1.2em;
  }
}

#idControlPanel::-webkit-scrollbar {
   /* Hide scrollbar for Chrome, Safari and Opera, but keep overflow: auto to enable scrolling */
  display: none;
}
#idControlPanel[size=s2] { }
#idControlPanel[size=s3] { max-height: 1.5em; height: 1.5em; }
#idControlPanel[size=s1] { max-height: 99vh ; height: fit-content; }

@media print {
  #idControlPanel { display: none; }
}


#idTableTopics,#idTableIndex {
  overflow: auto;
  margin: 0;
  max-width: 75ch;
 font-size: 0.8em;
}

#idTableTopics { background-color: #DDF; }
#idTableIndex  { background-color: #FDD; }
#idTableIndex > a {
  display: block;
}
#idTableIndex > h1,h2,h3,h4,h5,h6 {
  margin: 0.1em;
  font-weight: normal;
  font-family: sans;
}

#idTableIndex > h1 { font-size: 1em; }
#idTableIndex > h2, #idTableIndex > h3 {
  font-size: 1em;
  line-height: 1.5em;
  text-align: initial;
  margin-right: 1em;
  padding: 0 2px 0 2px;
  font-family: sans-serif;
  display: inline-block;
  white-space: nowrap;
}

#idTableTopics[size=s1], #idTableIndex[size=s1] {
    max-height: 80vh;
}

.topicClass {
  margin: 2px 0 0 -2px;
  padding: 0px;
  border-top: 2px;
  border-bottom: 1px solid grey;
  width:100%;
  white-space:normal;
}
.topicClass > .topic {
  float: right;
  display: inline-block;
  font-weight: bold;
}

.topicClass > .topicButtom {
  display: inline-block;
  background-color: #AFA;
  padding: 0px 2px 0px 2px;
  border: 1px solid gray;
  width: auto;
  min-width: 3ch;
  text-align: center;
  margin-left: 0.3ch;
  margin-bottom: 0.3em;
}
.selected { background-color:black !important; color: white ; }
.related0 { }
.related1 { background-color:#999  !important; color: white ; }
.related1:after { content: '¹'; }
.related2 { background-color:#999  !important; color: white ; }
.related2:after { content: '²'; }
.related3 { background-color:#999  !important; color: white ; } /* 3 or more */
.related3:after { content: '³⁺'; }

.grepMatch { background-color:#DDD; }

input:not(:placeholder-shown) { color: white; background-color: black; }

#idSwitchMenuIcon {
  position: fixed; bottom:0em; right: 0.0em;
  font-size: 2.0em;
  font-weight: bold;
  background-color: #FFF;
  opacity: 50%;
  padding: 0px;
}

.textSelectOff {
  user-select        : none; /* supported by Chrome and Opera */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select : none; /* Konqueror HTML */
  -moz-user-select   : none; /* Firefox */
  -ms-user-select    : none; /* Internet Explorer/Edge */
}

.txtblock {
  display: inline-block;
  /* background-color: black; */
  /* color: white; */
  font-family: monospace;
  font-size: 0.7rem;
  padding: 0 0 2px 0;
  vertical-align: top;
  max-width: 99%;
  overflow: auto;
  text-overflow: ellipsis;
  height: 2em;
  white-space: nowrap;
  opacity: 45%;
}

pre > .txtblock {
  font-size: inherit; 
  font-family: inherit;
  padding: unset;
  display: inline;
}


a /*, a:link, a:visited, a:hover, a:active */ {
  text-decoration: initial;
  color: blue;
}
h1 > a {
  text-decoration: underline;
  color: green;
}

h1,h2,h3,h4,h5,h6 {
    font-family:monospace;
}

.grepState {
  font-size:0.7em;
}

blockquote {
  border-left: 10px solid black;
  padding: 0.5em;
  max-width: auto;
  margin-left: 1em;
  background-color: beige;
}

a:link {
    text-decoration: none;
}

td, th {
  border: 1px solid black; 
  padding: 0 0.2ch 0 0.2ch;
}

@keyframes progressBarTimerAnimation {
  from {opacity: 1; left: 0;}
    to {opacity: 0; left: -100%;}
}
#progressBarTimer {
  position:absolute;
  left: -100%;
  width:98%;
  bottom:0;
  height:7px;
  background-color: brown;
  padding: 0;
  margin:0;
}
#progressBarTimer.timeout {
  animation-name: progressBarTimerAnimation;
  animation-duration: 22s; /* must match updateHideCtrPanelTimeout @ control_panel*/
}

#rule1,#rule2,#rule3,#rule4,#rule5 {
  position:fixed;
  left:0%;
  width:100%;
  opacity:0.2;
  background-color: yellow;
  height:10%;
}
#rule1.off,#rule2.off,#rule3.off,#rule4.off,#rule5.off { display:none; }
#rule1 { top:50%; }


hr {
  background-color: black;
  height: 0.2em;
}
hr[xxl]{
  height: 80em;
}


#hideButtom, #indexButton, #topicsButton, #settingsButton {
  float:right;
  background-color:transparent;
  opacity: 0.7;
  font-size: 0.9em;
  padding: 0.2em;
}
@media only screen and (pointer  : coarse) {
 #dbEngineOutput { font-size: 0.7rem; }
 #nonFixedMenu   { font-size: 0.9rem; }

 body {
  max-width: 100%;
  position: absolute;
  top: 0; left: 0;
  margin: 0;
  padding: 0;
 }
}

math {
    display: inline;
}
</style>
<!-- script src="./markdown.js"></script -->
<script type="module">
import { html, render } from './preact.standalone.module.js';
import { ControlPanel } from './control_panel.js';

const getParameterByName = function(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

const bootstrap = async function () {
  const URLtxtDDBB = getParameterByName('payload')
  render(
    html` <${ControlPanel} url_txt_source_csv=${URLtxtDDBB} />`,
    document.getElementById("idControlPanel")
  )
}

window.scrollInto = function(id) {
  window.history.pushState("", "");
  document
    .getElementById('dbEngineOutput')
    .querySelector(id)
    .scrollIntoView({ behavior: 'smooth' })
}

window.addEventListener('load', bootstrap )
</script>

<script id="MathJax-script" src="tex-mml-chtml.js">
</script>
</head>
<body margin="margin0">
<div id="idControlPanel" class="textSelectOff"></div>

<div id="dbEngineOutput" lineheight="height1" font="font1" fontSize="s1" background="b1" colorstyle="s1" >
</div>

</body>
</html>
