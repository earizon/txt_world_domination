<!DOCTYPE html>
<html>
   <meta charset="UTF-8">
   <meta name="viewport"
     content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
   <title>TXT World Domination</title>
   <head>
<style>
@font-face{
  font-family: 'source_code_pro';
  font-weight: 400;
  font-style: normal;
  font-stretch: normal;
  src: url('./source-code-pro/EOT/SourceCodePro-Regular.eot') format('embedded-opentype'),
       url('./source-code-pro/WOFF2/TTF/SourceCodePro-Regular.ttf.woff2') format('woff2'),
       url('./source-code-pro/WOFF/OTF/SourceCodePro-Regular.otf.woff') format('woff'),
       url('./source-code-pro/OTF/SourceCodePro-Regular.otf') format('opentype'),
       url('./source-code-pro/TTF/SourceCodePro-Regular.ttf') format('truetype') ;
}
pre { font-family:'source_code_pro',monospace, console; font-size:1em; }
#idControlPanel {
    margin: 0; padding 0.1em;
    border-bottom: 1px solid black; 
    position: sticky;
    top: 0;
    background-color: white;
    box-shadow: 0 0 3px 3px grey;
    max-height: 25em;
    overflow: auto;
}

.topicClass {
  margin: 0px;
  padding: 0px;
  padding-left: 10em;
  text-indent :-10em; /* un-indent 1st line */
  white-space:pre-line;
  border-bottom: 1px solid grey;
}
.topicClass > .topic {
  float:left;
  min-width: 10em;
}

.selected { background-color:black; color: white ; }

.grepMatch { background-color:#DDD; }


.textSelectOff {
  user-select        : none; /* supported by Chrome and Opera */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select : none; /* Konqueror HTML */
  -moz-user-select   : none; /* Firefox */
  -ms-user-select    : none; /* Internet Explorer/Edge */
}
</style>
<script type="module">
import { html, render } from './preact.standalone.module.js';
import { ControlPanel } from './control_panel.js';

const getParameterByName = function(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

const bootstrap = async function () {
  const URLtxtDDBB = getParameterByName('payload')
  render( html` <${ControlPanel} url_txt_source=${URLtxtDDBB} />`, document.getElementById("idControlPanel"))
}


window.addEventListener('load', bootstrap )
</script>
</head>
<body>
<pre id="idControlPanel" class="textSelectOff">
</pre>
<pre id="dbEngineOutput">
</pre>

</body>
</html>
