<!DOCTYPE html>
<html>
   <meta charset="UTF-8">
   <meta name="viewport"
     content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
   <title>TXT World Domination</title>
   <head>

<style>
@font-face {
  font-family: 'font0'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font0/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font1'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font1/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font2'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font2/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font3'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font3/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font4'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font4/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font5'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font5/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font6'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font6/font.woff2) format('woff2');
}
@font-face {
  font-family: 'font7'; font-style: normal; font-weight: 400; font-stretch: normal;
  src: url(fonts/font7/font.woff2) format('woff2');
}

pre { 
    'font0',monospace, console; font-size:1em; 
}

#dbEngineOutput[font=font0]{ font-family:'font0', monospace, console; font-size:1em; }
#dbEngineOutput[font=font1]{ font-family:'font1', monospace, console; font-size:1em; }
#dbEngineOutput[font=font2]{ font-family:'font2', monospace, console; font-size:1em; }
#dbEngineOutput[font=font3]{ font-family:'font3', monospace, console; font-size:1em; }
#dbEngineOutput[font=font4]{ font-family:'font4', monospace, console; font-size:1em; }
#dbEngineOutput[font=font5]{ font-family:'font5', monospace, console; font-size:1em; }
#dbEngineOutput[font=font6]{ font-family:'font6', monospace, console; font-size:1em; }
#dbEngineOutput[font=font7]{ font-family:'font7', monospace, console; font-size:1em; }

#idControlPanel {
    margin: 0; padding 0.1em;
    border-bottom: 1px solid black; 
    position: sticky;
    top: 0;
    background-color: white;
    box-shadow: 0 0 3px 3px grey;
    max-height: 25em;
    overflow: auto;
}

.topicClass {
  margin: 0px;
  padding: 0px;
  padding-left: 10em;
  text-indent :-10em; /* un-indent 1st line */
  white-space:pre-line;
  border-bottom: 1px solid grey;
}
.topicClass > .topic {
  float:left;
  min-width: 10em;
}

.selected { background-color:black; color: white ; }

.grepMatch { background-color:#DDD; }


.textSelectOff {
  user-select        : none; /* supported by Chrome and Opera */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select : none; /* Konqueror HTML */
  -moz-user-select   : none; /* Firefox */
  -ms-user-select    : none; /* Internet Explorer/Edge */
}
</style>
<script type="module">
import { html, render } from './preact.standalone.module.js';
import { ControlPanel } from './control_panel.js';

const getParameterByName = function(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

const bootstrap = async function () {
  const URLtxtDDBB = getParameterByName('payload')
  render( html` <${ControlPanel} url_txt_source=${URLtxtDDBB} />`, document.getElementById("idControlPanel"))
}


window.addEventListener('load', bootstrap )
</script>
</head>
<body>
<pre id="idControlPanel" class="textSelectOff">
</pre>
<pre id="dbEngineOutput">
</pre>

</body>
</html>
